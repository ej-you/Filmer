{"consumes":["application/json"],"produces":["application/json"],"schemes":["http"],"swagger":"2.0","info":{"description":"This is a Filmer API for Kinopoisk API and DB","title":"Filmer API","contact":{},"license":{"name":"MIT Licence","url":"https://github.com/ej-you/Filmer/blob/master/LICENCE"},"version":"1.0.0"},"host":"127.0.0.1:3000","basePath":"/api/v1","paths":{"/films/stared":{"get":{"security":[{"JWT":[]}],"description":"Получение избранных фильмов юзера с пагинацией и настраиваемой сортировкой и фильтрацией","tags":["films"],"summary":"Получение избранных фильмов юзера","operationId":"films-get-stared","parameters":[{"type":"integer","description":"страница поиска (Например: 1)","name":"page","in":"query"},{"type":"string","description":"поле для сортировки (Например: year | По умолчанию: updated_at | Допустимые значения: title, rating, year, updated_at)","name":"sortField","in":"query"},{"type":"string","description":"направление сортировки (Например: desc | По умолчанию: asc [для updated_at: desc] | Допустимые значения: asc, desc)","name":"sortOrder","in":"query"},{"type":"number","description":"минимальный рейтинг (Например: 7.5 | Допустимые значения: 0 и больше)","name":"ratingFrom","in":"query"},{"type":"integer","description":"минимальный год (Например: 1991 | Допустимые значения: 1500..3000)","name":"yearFrom","in":"query"},{"type":"integer","description":"максимальный год (Например: 2014 | Допустимые значения: 1500..3000)","name":"yearTo","in":"query"},{"type":"string","description":"тип фильма (Например: сериал | Допустимые значения: фильм, сериал, видео, мини-сериал)","name":"type","in":"query"},{"type":"array","items":{"type":"string"},"collectionFormat":"multi","description":"жанры фильмов (Например: боевик)","name":"genres","in":"query"}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/schemas.UserMovie"}},"401":{"description":"Пустой или неправильный токен"},"403":{"description":"Истекший или невалидный токен"}}}},"/films/want":{"get":{"security":[{"JWT":[]}],"description":"Получение фильмов юзера из списка \"хочу посмотреть\" с пагинацией и настраиваемой сортировкой и фильтрацией","tags":["films"],"summary":"Получение фильмов юзера из списка \"хочу посмотреть\"","operationId":"films-get-want","parameters":[{"type":"integer","description":"страница поиска (Например: 1)","name":"page","in":"query"},{"type":"string","description":"поле для сортировки (Например: year | По умолчанию: updated_at | Допустимые значения: title, rating, year, updated_at)","name":"sortField","in":"query"},{"type":"string","description":"направление сортировки (Например: desc | По умолчанию: asc [для updated_at: desc] | Допустимые значения: asc, desc)","name":"sortOrder","in":"query"},{"type":"number","description":"минимальный рейтинг (Например: 7.5 | Допустимые значения: 0 и больше)","name":"ratingFrom","in":"query"},{"type":"integer","description":"минимальный год (Например: 1991 | Допустимые значения: 1500..3000)","name":"yearFrom","in":"query"},{"type":"integer","description":"максимальный год (Например: 2014 | Допустимые значения: 1500..3000)","name":"yearTo","in":"query"},{"type":"string","description":"тип фильма (Например: сериал | Допустимые значения: фильм, сериал, видео, мини-сериал)","name":"type","in":"query"},{"type":"array","items":{"type":"string"},"collectionFormat":"multi","description":"жанры фильмов (Например: боевик)","name":"genres","in":"query"}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/schemas.UserMovie"}},"401":{"description":"Пустой или неправильный токен"},"403":{"description":"Истекший или невалидный токен"}}}},"/films/watched":{"get":{"security":[{"JWT":[]}],"description":"Получение фильмов юзера из списка \"посмотрел\" с пагинацией и настраиваемой сортировкой и фильтрацией","tags":["films"],"summary":"Получение фильмов юзера из списка \"посмотрел\"","operationId":"films-get-watched","parameters":[{"type":"integer","description":"страница поиска (Например: 1)","name":"page","in":"query"},{"type":"string","description":"поле для сортировки (Например: year | По умолчанию: updated_at | Допустимые значения: title, rating, year, updated_at)","name":"sortField","in":"query"},{"type":"string","description":"направление сортировки (Например: desc | По умолчанию: asc [для updated_at: desc] | Допустимые значения: asc, desc)","name":"sortOrder","in":"query"},{"type":"number","description":"минимальный рейтинг (Например: 7.5 | Допустимые значения: 0 и больше)","name":"ratingFrom","in":"query"},{"type":"integer","description":"минимальный год (Например: 1991 | Допустимые значения: 1500..3000)","name":"yearFrom","in":"query"},{"type":"integer","description":"максимальный год (Например: 2014 | Допустимые значения: 1500..3000)","name":"yearTo","in":"query"},{"type":"string","description":"тип фильма (Например: сериал | Допустимые значения: фильм, сериал, видео, мини-сериал)","name":"type","in":"query"},{"type":"array","items":{"type":"string"},"collectionFormat":"multi","description":"жанры фильмов (Например: боевик)","name":"genres","in":"query"}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/schemas.UserMovie"}},"401":{"description":"Пустой или неправильный токен"},"403":{"description":"Истекший или невалидный токен"}}}},"/films/{movieID}/clear":{"post":{"security":[{"JWT":[]}],"description":"Удаление фильма юзера из списков \"хочу посмотреть\" и \"посмотрел\" по ID фильма","tags":["films"],"summary":"Удаление фильма юзера из списков \"хочу посмотреть\" и \"посмотрел\"","operationId":"films-set-clear","parameters":[{"type":"string","description":"ID фильма","name":"movieID","in":"path","required":true}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/schemas.UserMovie"}},"401":{"description":"Пустой или неправильный токен"},"403":{"description":"Истекший или невалидный токен"},"404":{"description":"Фильм не найден"}}}},"/films/{movieID}/star":{"post":{"security":[{"JWT":[]}],"description":"Добавление фильма юзера в избранное по ID фильма","tags":["films"],"summary":"Добавление фильма юзера в избранное","operationId":"films-set-star","parameters":[{"type":"string","description":"ID фильма","name":"movieID","in":"path","required":true}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/schemas.UserMovie"}},"401":{"description":"Пустой или неправильный токен"},"403":{"description":"Истекший или невалидный токен"},"404":{"description":"Фильм не найден"}}}},"/films/{movieID}/unstar":{"post":{"security":[{"JWT":[]}],"description":"Удаление фильма юзера из избранного по ID фильма","tags":["films"],"summary":"Удаление фильма юзера из избранного","operationId":"films-set-unstar","parameters":[{"type":"string","description":"ID фильма","name":"movieID","in":"path","required":true}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/schemas.UserMovie"}},"401":{"description":"Пустой или неправильный токен"},"403":{"description":"Истекший или невалидный токен"},"404":{"description":"Фильм не найден"}}}},"/films/{movieID}/want":{"post":{"security":[{"JWT":[]}],"description":"Добавление фильма юзера в список \"хочу посмотреть\" по ID фильма","tags":["films"],"summary":"Добавление фильма юзера в список \"хочу посмотреть\"","operationId":"films-set-want","parameters":[{"type":"string","description":"ID фильма","name":"movieID","in":"path","required":true}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/schemas.UserMovie"}},"401":{"description":"Пустой или неправильный токен"},"403":{"description":"Истекший или невалидный токен"},"404":{"description":"Фильм не найден"}}}},"/films/{movieID}/watched":{"post":{"security":[{"JWT":[]}],"description":"Добавление фильма юзера в список \"посмотрел\" по ID фильма","tags":["films"],"summary":"Добавление фильма юзера в список \"посмотрел\"","operationId":"films-set-watched","parameters":[{"type":"string","description":"ID фильма","name":"movieID","in":"path","required":true}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/schemas.UserMovie"}},"401":{"description":"Пустой или неправильный токен"},"403":{"description":"Истекший или невалидный токен"},"404":{"description":"Фильм не найден"}}}},"/kinopoisk/films/search":{"get":{"security":[{"JWT":[]}],"description":"Поиск фильмов по ключевому слову с пагинацией","tags":["kinopoisk-films"],"summary":"Поиск фильмов","operationId":"kinopoisk-search-films","parameters":[{"type":"string","description":"ключевое слово (Например: матрица)","name":"q","in":"query","required":true},{"type":"integer","description":"страница поиска (Например: 1)","name":"page","in":"query","required":true}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/kinopoisk_api.SearchedFilms"}},"401":{"description":"Пустой или неправильный токен"},"402":{"description":"Превышен дневной лимит запросов к Kinopoisk API"},"403":{"description":"Истекший или невалидный токен"},"404":{"description":"Фильмы не найдены"},"429":{"description":"Слишком много запросов. Лимит 5 запросов в секунду"}}}},"/kinopoisk/films/{kinopoiskID}":{"get":{"security":[{"JWT":[]}],"description":"Получение информации о фильме по его kinopoisk ID","tags":["kinopoisk-films"],"summary":"Получение информации о фильме","operationId":"kinopoisk-get-film-info","parameters":[{"type":"integer","description":"kinopoisk ID фильма","name":"kinopoiskID","in":"path","required":true}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/schemas.UserMovie"}},"401":{"description":"Пустой или неправильный токен"},"402":{"description":"Превышен дневной лимит запросов к Kinopoisk API"},"403":{"description":"Истекший или невалидный токен"},"404":{"description":"Фильм не найден"},"429":{"description":"Слишком много запросов. Лимит 5 запросов в секунду"}}}},"/user/login":{"post":{"description":"Вход для существующего юзера по почте и паролю","consumes":["application/json"],"produces":["application/json"],"tags":["user"],"summary":"Вход для юзера","operationId":"user-login","parameters":[{"description":"LoginIn","name":"LoginIn","in":"body","required":true,"schema":{"$ref":"#/definitions/app_user.LoginIn"}}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/schemas.User"}},"400":{"description":"Неверный пароль для учетной записи юзера"},"404":{"description":"Юзер с введенной почтой не найдены"}}}},"/user/logout":{"post":{"security":[{"JWT":[]}],"description":"Выход юзера (помещение JWT-token'а текущей сессии юзера в черный список)","tags":["user"],"summary":"Выход юзера","operationId":"user-logout","responses":{"204":{"description":"No Content"},"401":{"description":"Пустой или неправильный токен"},"403":{"description":"Истекший или невалидный токен"}}}},"/user/sign-up":{"post":{"description":"Регистрация нового юзера с почтой и паролем","consumes":["application/json"],"produces":["application/json"],"tags":["user"],"summary":"Регистрация юзера","operationId":"user-sign-up","parameters":[{"description":"SignUpIn","name":"SignUpIn","in":"body","required":true,"schema":{"$ref":"#/definitions/app_user.SignUpIn"}}],"responses":{"201":{"description":"Created","schema":{"$ref":"#/definitions/schemas.User"}},"409":{"description":"Юзер с введенной почтой уже зарегистрирован"}}}}},"definitions":{"app_user.LoginIn":{"description":"данные для входа юзера","type":"object","required":["email","password"],"properties":{"email":{"description":"почта юзера","type":"string","maxLength":100,"example":"user@gmail.com"},"password":{"description":"пароль юзера","type":"string","maxLength":50,"minLength":8,"example":"qwerty123"}}},"app_user.SignUpIn":{"description":"данные для регистрации юзера","type":"object","required":["email","password"],"properties":{"email":{"description":"почта юзера","type":"string","maxLength":100,"example":"user@gmail.com"},"password":{"description":"пароль юзера","type":"string","maxLength":50,"minLength":8,"example":"qwerty123"}}},"kinopoisk_api.Film":{"description":"получаемые данные о фильме (при поиске фильмов)","type":"object","properties":{"genres":{"description":"жанры фильма","type":"array","items":{"$ref":"#/definitions/kinopoisk_api.Genre"}},"id":{"description":"kinopoisk ID фильма","type":"integer","example":301},"name":{"description":"название фильма","type":"string","example":"Матрица"},"poster":{"description":"постер фильма","allOf":[{"$ref":"#/definitions/kinopoisk_api.Poster"}]},"rating":{"description":"рейтинг фильма","allOf":[{"$ref":"#/definitions/kinopoisk_api.Rating"}]},"type":{"description":"тип фильма","type":"string","example":"movie"},"year":{"description":"год выхода фильма","type":"integer","example":1999}}},"kinopoisk_api.Genre":{"description":"жанр фильма (при поиске фильмов)","type":"object","properties":{"name":{"type":"string","example":"боевик"}}},"kinopoisk_api.Poster":{"description":"ссылка на постер фильма (при поиске фильмов)","type":"object","properties":{"url":{"type":"string","example":"https://image.openmoviedb.com/kinopoisk-images/4774061/cf1970bc-3f08-4e0e-a095-2fb57c3aa7c6/orig"}}},"kinopoisk_api.Rating":{"description":"рейтинг фильма (при поиске фильмов)","type":"object","properties":{"kp":{"type":"number","example":8.498}}},"kinopoisk_api.SearchedFilms":{"description":"получаемые данные (при поиске фильмов)","type":"object","properties":{"docs":{"description":"информация о фильме","type":"array","items":{"$ref":"#/definitions/kinopoisk_api.Film"}},"limit":{"description":"количество фильмов на каждой странице","type":"integer","example":25},"page":{"description":"номер страницы","type":"integer","example":1},"pages":{"description":"всего страниц","type":"integer","example":12},"total":{"description":"всего найдено результатов","type":"integer","example":300}}},"schemas.FilmStaff":{"description":"информация о персонале фильма","type":"object","properties":{"actors":{"description":"актёры фильма (до 30 максимум)","type":"array","items":{"$ref":"#/definitions/schemas.Person"}},"directors":{"description":"режиссёры фильма","type":"array","items":{"$ref":"#/definitions/schemas.Person"}}}},"schemas.Genre":{"description":"жанр фильма","type":"object","properties":{"genre":{"description":"жанр фильма","type":"string","example":"боевик"}}},"schemas.Movie":{"description":"получаемые данные о фильме","type":"object","properties":{"description":{"description":"описание фильма","type":"string","example":"Жизнь Томаса Андерсона разделена на две части: днём он — самый обычный офисный работник, получающий нагоняи от начальства, а ночью превращается в хакера по имени Нео, и нет места в сети, куда он бы не смог проникнуть. Но однажды всё меняется. Томас узнаёт ужасающую правду о реальности."},"filmLength":{"description":"длина фильма","type":"string","example":"2:16"},"genres":{"description":"жанры фильма","type":"array","items":{"$ref":"#/definitions/schemas.Genre"}},"id":{"description":"uuid фильма","type":"string","example":"0a54d171-7b07-41d1-bf5e-0ebe2b64b65a"},"imgURL":{"description":"ссылка на картинку фильма","type":"string","example":"https://kinopoiskapiunofficial.tech/images/posters/kp_small/301.jpg"},"kinopoiskID":{"description":"kinopoisk ID фильма","type":"integer","example":301},"personal":{"description":"персонал фильма","allOf":[{"$ref":"#/definitions/schemas.FilmStaff"}]},"rating":{"description":"рейтинг фильма","type":"number","example":8.5},"title":{"description":"название фильма","type":"string","example":"Матрица"},"type":{"description":"тип фильма (фильм, сериал, видео, мини-сериал)","type":"string","example":"фильм"},"updatedAt":{"description":"дата последнего обновления информации от Kinopoisk API (в формате RFC3339)","type":"string","example":"2025-02-28T22:00:05.225526936Z"},"webURL":{"description":"ссылка на страницу фильма на Kinopoisk","type":"string","example":"https://www.kinopoisk.ru/film/301/"},"year":{"description":"год выхода фильма","type":"integer","example":1999}}},"schemas.Person":{"description":"информация об одном человеке","type":"object","properties":{"id":{"description":"kinopoisk ID человека","type":"integer","example":7836},"imgUrl":{"description":"ссылка на картинку человека","type":"string","example":"https://st.kp.yandex.net/images/actor_iphone/iphone360_7836.jpg"},"name":{"description":"имя человека","type":"string","example":"Киану Ривз"},"role":{"description":"роль (у актёра)","type":"string","example":"Neo"}}},"schemas.User":{"description":"получаемые данные о юзере","type":"object","properties":{"accessToken":{"description":"access токен, генерируемый после успешной аутентификации","type":"string","example":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3NDA3NjA0MzIsInVzZXJJRCI6IjU4MzU0ZGJhLWUyY2MtNDI4My04MjAxLWNjZGRiZTkzOGExNSJ9.VwA9d9lao0Xgl5c3H9VNM8JVtUKDs47YEItb6MZlkCw"},"email":{"description":"почта юзера","type":"string","example":"user@gmail.com"}}},"schemas.UserMovie":{"description":"получаемые данные о фильме юзера","type":"object","properties":{"movie":{"$ref":"#/definitions/schemas.Movie"},"stared":{"description":"в избранном ли фильм","type":"boolean","example":true},"status":{"description":"в каком списке фильм (0 - ничего, 1 - хочу посмотреть, 2 - посмотрел)","type":"integer","example":1}}}},"securityDefinitions":{"JWT":{"description":"JWT security accessToken. Please, add it in the format \"Bearer {AccessToken}\" to authorize your requests.","type":"apiKey","name":"Authorization","in":"header"}}}