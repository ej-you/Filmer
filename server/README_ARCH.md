# Чистая архитектура серверной части приложения Filmer


## Все содержимое

### `/server/cmd/app`
Точка входа для серверной части приложения.

### `/server/config`
Главный конфиг для работы сервера.

### `docs`
Сгенерированная Swager документация.

### `internal`
Основная логика приложения. Не импортируется за пределы своего пакета.

### `migrations`
Миграции БД.

### `pkg`
Внешние зависимости, оформленные в виде интерфейсов, для использования в любой части приложения.

### `third_party`
Внешние дополнительные сервисы (в данном случае - Kinopoisk API клиент).


## Основная логика приложения

### `internal/app`
Содержит в себе интерфейс сервера и middleware менеджер для него.

### `internal/entity`
Содержит модели данных, используемые приложением.

> При этом в пакете `internal` отдельно содержатся пакеты для реализации действий с моделями данных.
> <br>
> Все эти пакеты построены по одной схеме, описанной в следующем разделе.


## Пакет для реализации действий с моделью данных

Каждый такой пакет содержит в себе интерфейсы:
1. Usecase
2. Repository (и/или его виды, такие как CacheRepository и KinopoiskWebAPI)
3. Router

#### Usecase
Этот интерфейс содержит действия, которые можно совершать с моделью данных, к которому он привязан.
Все общения между пакетами с реализациями действий с моделями данных должны проходить только через этот интерфейс.

* реализуется в подпакете usecase

#### Repository
Этот интерфейс содержит методы для CRUD-оперирования данными модели.
В качестве репозитория могут выступать различные хранилища данных (БД, кэш, S3) или внешние API

* реализуется в подпакете repository

> _!! Репозитории используются внутри Usecase методов !!_

#### Router
Этот интерфейс позволяет настроить пути для доставки данных клиентам. В данном проекте для этого используется HTTP.
`Router` использует `Usecase` и `Repository` интерфейсы для своей работы.
Обработчики запросов находятся рядом с `Router` интерфейсом и используются только им.

* реализуется в подпакете delivery/http
